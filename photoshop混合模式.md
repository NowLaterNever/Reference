# 混合模式的基本概念

理解混合模式的原理，需熟知这些概念：像素、图层、通道、RGB模式基本原理。

我们先建立两个图层：

- 当前选中层（Active Layer）为A层，或称“混合色 blend color”。
- 下层（Background Layer）为B层，或称“基色 base color”，两者混合得到“结果色 Result color”。

![p1](C:\Users\sk-hanshuangcheng\Desktop\photoshop 混合模式\p1.png)

# 混合模式的基本原理

取A层任意一个像素a [R1, G1, B1]，与B层对应位置的像素b [R2, G2, B2] 进行数学运算，得到c [R3, G3, B3]。

- R1 某种运算 R2 = R3
- G1 某种运算 G2 = G3
- B1 某种运算 B2 = B3

A、B两层所有像素都独立进行同样的运算，即得到混合后的结果C，即新的A层（注意虽然A层缩略图没有变，但直方图已经变了），而B保持不变。




举一个简单例子，PS默认的图层混合模式是“正常”，在不透明度为100%时:

- R1 正常 R2 = R1
- G1 正常 G2 = G1
- B1 正常 B2 = B1

也就是说，“正常”模式下，A层在B层之上，看到的只有A层，看不到B层。



# 混合模式分类

- **一般系**：正常、溶解
- **变暗系**：变暗、深色、正片叠底、颜色加深、线性加深
- **变亮系**：变亮、浅色、滤色、颜色减淡、线性减淡
- **对比系**：叠加、强光、柔光、亮光、线性光、点光、实色混合

	>该组特点是让亮的更亮，暗的更暗，每一个“对比系”的混合模式都可看作“变暗系”和“变亮系”的结合，如“叠加”是对较暗的像素进行“正片叠底”，对较亮的像素进行“滤色”

- **负片系**：差值、排除
- **相消系**：减去、划分
- **HSL系**：色相、饱和度、颜色、明度



# 混合模式彼此之间的联系

1. 对于大多数混合模式，图层“不透明度”和“填充度”对混合效果影响是一样的，也就是说，60%的不透明度，与60%的填充度，得到的效果一样；但以下8种混合模式是例外：

- 颜色加深、颜色减淡
- 线性加深、线性减淡
- 亮光、线性光、实色混合
- 差值

2. 以下5组混合模式是相反对应关系(从后面的公式就可以看出)：

- 变暗 - 变亮
- 深色 - 浅色
- 正片叠底 - 滤色
- 颜色加深 - 颜色减淡
- 线性加深 - 线性减淡

3. 具有“互逆”关系的混合模式有两组，举例，A层在上，对A“叠加”；B层在上，对B“强光”：两种情况得到的效果是一样的：

- 叠加 - 强光
- 颜色 - 明度



# 每一种混合模式的运算方法

当通道位深度为8位时，R、G、B三通道数值范围在0到255，我们除以255，得到0~1范围内的数值。我们用下图所示的两个100像素的图层做实验。

A层有一个颜色， [R, G, B]值分别是 [102, 153, 204]，即[0.4, 0.6, 0.8]。

B层有两个颜色，[0, 51, 102] 和 [255, 204, 153]，即 [0, 0.2, 0.4] 和 [1, 0.8, 0.6]。

![p2](C:\Users\sk-hanshuangcheng\Desktop\photoshop 混合模式\p2.png)

选中A层，调节混合模式。



### Ⅰ正常系

> 正常 Normal

设不透明度为n。

$$
c=n^{*} a+(1-n)^{*} b
$$
当不透明度为100%时
$$
c=a
$$
